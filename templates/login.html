{% extends 'layout.html' %}
{% block title %}Login{% endblock %}

{% block extra_css %}
<style>
    .login-container {
        max-width: 450px;
        margin: 0 auto;
        padding: 40px 20px;
    }
    
    .login-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        padding: 40px;
    }
    
    .university-header-login {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .logo-circle {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, var(--cuk-blue), var(--cuk-green));
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        color: white;
        font-size: 1.8rem;
    }
    
    .form-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        z-index: 10;
    }
    
    .form-control {
        padding-left: 45px;
        border-radius: 8px;
        border: 1px solid #dee2e6;
        transition: all 0.3s;
        height: 45px;
    }
    
    .form-control:focus {
        border-color: var(--cuk-blue);
        box-shadow: 0 0 0 0.25rem rgba(0, 51, 102, 0.25);
    }
    
    .password-toggle {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #6c757d;
        cursor: pointer;
        z-index: 10;
    }
    
    .demo-section {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        margin-top: 20px;
    }
    
    .demo-account {
        background: white;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #dee2e6;
    }
    
    .forgot-password {
        color: var(--cuk-blue);
        text-decoration: none;
        font-size: 0.9rem;
    }
    
    .forgot-password:hover {
        text-decoration: underline;
    }
</style>
{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-card">
        <!-- University Header -->
        <div class="university-header-login">
            <div class="logo-circle">
                <i class="bi bi-building"></i>
            </div>
            <h4 class="cuk-text-primary mb-2">Central University of Karnataka</h4>
            <p class="text-muted">Event Management System</p>
        </div>
        
        <h5 class="text-center mb-4">Sign in to your account</h5>
        
        <form method="POST" id="loginForm">
            <!-- Email -->
            <div class="mb-3">
                <label class="form-label">University Email</label>
                <div class="position-relative">
                    <i class="bi bi-envelope form-icon"></i>
                    <input type="email" name="email" class="form-control" 
                           placeholder="name@cuk.ac.in" required
                           value="admin@cuk.ac.in">
                </div>
            </div>
            
            <!-- Password -->
            <div class="mb-3">
                <div class="d-flex justify-content-between align-items-center mb-1">
                    <label class="form-label">Password</label>
                    <a href="javascript:void(0)" class="forgot-password" 
                       onclick="showPasswordHelp()">
                        Forgot password?
                    </a>
                </div>
                <div class="position-relative">
                    <i class="bi bi-lock form-icon"></i>
                    <input type="password" name="password" id="password" 
                           class="form-control" placeholder="Enter your password" required
                           value="admin123">
                    <button type="button" class="password-toggle" 
                            onclick="togglePassword()">
                        <i class="bi bi-eye"></i>
                    </button>
                </div>
            </div>
            
            <!-- Remember Me -->
            <div class="mb-4">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="remember">
                    <label class="form-check-label" for="remember">
                        Remember me
                    </label>
                </div>
            </div>
            
            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100 py-2 mb-3">
                <i class="bi bi-box-arrow-in-right me-2"></i>Sign In
            </button>
            
            <div class="text-center">
                <small class="text-muted">
                    Don't have an account? 
                    <a href="{{ url_for('register_user') }}" class="text-primary text-decoration-none">
                        Register here
                    </a>
                </small>
            </div>
        </form>
        
        <!-- Demo Accounts -->
        <div class="demo-section">
            <h6 class="text-center mb-3"><i class="bi bi-info-circle me-2"></i>Demo Accounts</h6>
            
            <!-- Admin Account -->
            <div class="demo-account">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <small><strong>Admin Account</strong></small><br>
                        <small class="text-muted">Full system access</small>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-primary" 
                            onclick="fillCredentials('admin')">
                        <i class="bi bi-clipboard me-1"></i>Fill
                    </button>
                </div>
                <div class="mt-2">
                    <small class="text-muted">
                        <i class="bi bi-envelope me-1"></i>admin@cuk.ac.in<br>
                        <i class="bi bi-key me-1"></i>admin123
                    </small>
                </div>
            </div>
            
            <!-- Student Account -->
            <div class="demo-account">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <small><strong>Student Account</strong></small><br>
                        <small class="text-muted">Event registration access</small>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-success" 
                            onclick="fillCredentials('student')">
                        <i class="bi bi-clipboard me-1"></i>Fill
                    </button>
                </div>
                <div class="mt-2">
                    <small class="text-muted">
                        <i class="bi bi-envelope me-1"></i>student@cuk.ac.in<br>
                        <i class="bi bi-key me-1"></i>student123
                    </small>
                </div>
            </div>
            
            <!-- Faculty Account (if needed) -->
            <div class="demo-account">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <small><strong>Faculty Account</strong></small><br>
                        <small class="text-muted">Event management access</small>
                    </div>
                    <button type="button" class="btn btn-sm btn-outline-warning" 
                            onclick="fillCredentials('faculty')">
                        <i class="bi bi-clipboard me-1"></i>Fill
                    </button>
                </div>
                <div class="mt-2">
                    <small class="text-muted">
                        <i class="bi bi-envelope me-1"></i>faculty@cuk.ac.in<br>
                        <i class="bi bi-key me-1"></i>faculty123
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function togglePassword() {
    const passwordField = document.getElementById('password');
    const toggleButton = document.querySelector('.password-toggle i');
    
    if (passwordField.type === 'password') {
        passwordField.type = 'text';
        toggleButton.classList.remove('bi-eye');
        toggleButton.classList.add('bi-eye-slash');
    } else {
        passwordField.type = 'password';
        toggleButton.classList.remove('bi-eye-slash');
        toggleButton.classList.add('bi-eye');
    }
}

function fillCredentials(type) {
    const emailField = document.querySelector('input[name="email"]');
    const passwordField = document.getElementById('password');
    
    if (type === 'admin') {
        emailField.value = 'admin@cuk.ac.in';
        passwordField.value = 'admin123';
    } else if (type === 'student') {
        emailField.value = 'student@cuk.ac.in';
        passwordField.value = 'student123';
    } else if (type === 'faculty') {
        emailField.value = 'faculty@cuk.ac.in';
        passwordField.value = 'faculty123';
    }
    
    // Visual feedback
    emailField.focus();
    emailField.style.borderColor = '#28a745';
    passwordField.style.borderColor = '#28a745';
    
    setTimeout(() => {
        emailField.style.borderColor = '#dee2e6';
        passwordField.style.borderColor = '#dee2e6';
    }, 1000);
}

function showPasswordHelp() {
    const message = `
    üîê **Password Assistance**
    
    For password reset, please contact:
    üìß Email: admin@cuk.ac.in
    üìû Phone: 08388-251100
    
    **Demo Accounts Available:**
    ‚Ä¢ Admin: admin@cuk.ac.in / admin123
    ‚Ä¢ Student: student@cuk.ac.in / student123
    ‚Ä¢ Faculty: faculty@cuk.ac.in / faculty123
    
    Please use your official university email (@cuk.ac.in) for registration.
    `;
    
    alert(message);
}

// Form validation
document.getElementById('loginForm').addEventListener('submit', function(e) {
    const email = document.querySelector('input[name="email"]').value;
    const password = document.getElementById('password').value;
    
    if (!email || !password) {
        e.preventDefault();
        alert('Please fill in all fields');
        return false;
    }
    
    if (!email.includes('@')) {
        e.preventDefault();
        alert('Please enter a valid email address');
        return false;
    }
    
    return true;
});

// Auto-focus on email field
document.addEventListener('DOMContentLoaded', function() {
    document.querySelector('input[name="email"]').focus();
});
</script>
{% endblock %}
